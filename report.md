# [페이히어] 데브옵스 엔지니어 (DevOps Engineer) 과제 전형 안내

```jsx
안녕하세요 지원자님, 반갑습니다.
페이히어와 데브옵스 엔지니어 포지션에 관심을 가지고 지원해주셔서 다시 한 번 감사의 말씀 드립니다.

해당 과제는 **데브옵스 엔지니어의 대용량 트래픽, 트러블슈팅, 생산성 측면에서 역량**이 있으신 분을 
채용하는 것을 목표로 준비되었습니다.
 
아래 안내에 따라 과제 전형을 진행 부탁 드리며,
추가로 궁금하신 부분은 recruit@payhere.in으로 문의해주세요.
```

## **과제 설명**
```
안녕하세요 먼저 면접 기회를 주셔서 감사 드립니다.
포스 , 키오스크 전문 기업이며 주로 돈이 오고 가는 결제 서비스를 운영 하시다 보니 
서비스 안정성이 제일 중요 하다고 판단 되며 그에 걸 맞도록 과제를 진행 하여 보겠습니다.
```

# questions 1 

 페이히어는 EKS를 기반으로 서비스를 하고 있습니다. 서비스 연속성을 위해 무중단은 필수 요건입니다. 무중단을 위해 해야할것을 아는바 상세히 설명부탁드립니다. \
  * 필수 키워드
     * 이미 서버에 들어온 트래픽
     *  main process


# answers 1
서비스 연속성을 위한 무중단, 즉 고가용성을 달성 하기 위해서는 여러가지 항목을 고려 해야 합니다. 
eks 기반이라는 가정 하에 큰 단위의 resource 부터 나열 하자면
## resource
 - provider(AWS) 
    - CSP도 서비스 가용성이 100%는 아닙니다. 
    - 그래서 자체 IDC를 구축하여 하이브리드 클라우드를 구축 하거나 멀티 클라우드를 구축 하는 방법도 있습니다.
    - 멀티 or 하이브리드 클라우드를 구축 하였다면 dns 서버에서 가중치를 조절 하여 트래픽을 분산 할 수 있습니다.
 - nework(vpc-elb)
    - 서비스 가용성, 무중단 배포를 위해서는 ecs, eks위에 elb를 연결 해야 합니다.
    - EKS와 ELB는 서로 긴밀한 관계를 맺고 있습니다. 
    - EKS로 생성 된 POD는(service : LoadBalnace) ELB의 Private IP를 가지고 있습니다.
 - node(ec2)
 - pod
    먼저 eks에서 서비스를 제공 하기 위해서는 pod에 서비스를 올려야 합니다.
    pod를 구동하는 방법은 크게 3가지가 있습니다.
    1. pod : kubectl run 으로 시작 하며 파드가 삭제 될 경우 자가회복(auto recover)이 불가능함
    2. static pod : kube-api가  컨트롤 하는 것이 아닌 node내의 /etc/kubernetes/manifest 내에 설정 되어 있는 yaml파일의 형상으로만 동작
    2. deployments : pod에 대한 설정과 더불어 각종 네트워크 replica 갯수등의 설정이 포함 되어 있어 상시 원하는 replica 숫자 만큼 
       pod의 갯수를 유지 하려고 함
     - database
     - 기타 서비스 component (redis, kafaka 등)

## Monitoring
모니터링 / 장애 알림



1. 아래 제시된 상황에 맞는 아키텍처와 필요한 코드를 공유부탁드립니다. 
    - 상황 및 요구사항
        - 개발자분들이 특정 리소스를 자유롭게 생성할 수 있는 환경입니다.
        - AWS에선 비용 추적 및 관리를 위해 태그를 활용할 수 있습니다.
        - 태그가 없이 생성된 리소스에 대해 slack으로 인지하고 또한 자동으로 태깅을 적용하고자 합니다.
        - 해당 코드를 실행하기 위해 slack_url은 외부에서 주입할 수 있어야 합니다.
        - 명시한 상황 이외에는 자유롭게 가정하여 진행하시면 됩니다.
    
2. 아래 제시된 상황에 맞는 답변을 부탁드립니다.
    - 상황
        - 서로 다른 VPC로 운영되는 서비스를 연동하고자 합니다.
        - 동일한 AWS Account 중 VPC_A 에는 EKS 기반으로, VPC_B에는 ECS 기반으로 운영중입니다.
    - 문제
        - VPC_A EKS 서비스와 VPC_B ECS 서비스가 통신하기 위한 방법에 대해 아는 바 자유롭게 설명부탁드립니다. (단, 해당 기능을 선택한 이유를 명시바랍니다)
        - 만일, *서로 다른 계정*에서 운영되는 각 VPC CIDR가 동일한 경우 통신을 위해 어떻게 설계할 수 있는지 설명 부탁드립니다.

## 제출방법

---

- 요구 사항에 만족하는 답변을 PDF로 공유 부탁드립니다. 또한 코드가 공유되어야 하는 경우 public repo url을 공유 부탁드리겠습니다.
- 개인 사정으로 과제 전형을 포기하시는 경우에도 꼭 회신 부탁드리겠습니다.

## 주의사항

---

- 해당 과제는 타인의 도움없이 지원자가 직접 작성해야 합니다.
- 해당 과제를 직/간접적으로 타인에게 유출하는 행위를 금합니다.
